{
  "name": "humble_dev-x86",
   "build": {
    "dockerfile": "Dockerfile.humble",
    "context": "../.."
  },


  "initializeCommand": "xhost + || true",

  "runArgs": [
    "--gpus", "all",
    "--net=host",
    "--ipc=host",
    "--device=/dev/input",
    "--device=/dev/bus/usb:/dev/bus/usb", //include zed2 device
    "--device=/dev/hidraw0:/dev/hidraw0", //include zed2  HID
    "--device=/dev/hidraw1:/dev/hidraw1", //include zed2 HID
    "--device=/dev/hidraw2:/dev/hidraw2", //include zed2 HID
    //"--device=/dev/hidraw4:/dev/hidraw4", //include zed2 HID
    //"--device=/dev/hidraw5:/dev/hidraw5", //include zed2 HID
    //"--device=/dev/hidraw6:/dev/hidraw6", //include zed2 HID
    //"--device=/dev/hidraw7:/dev/hidraw7", //include zed2 HID
    "--device=/dev/video0:/dev/video0", //include zed2 HID
    "--device=/dev/video1:/dev/video1", //include zed2 HID
    "--device=/dev/video2:/dev/video2", //include zed2 HID
    "--device=/dev/video3:/dev/video3", //include zed2 HID
    //"--device=/dev/hidraw8", //include zed2 HID
    "--device=/dev/dri",
	  "--volume", "/tmp/.X11-unix:/tmp/.X11-unix:rw",

    "--env", "NVIDIA_VISIBLE_DEVICES=all",
    "--env", "NVIDIA_DRIVER_CAPABILITIES=all",
    "--env", "QT_X11_NO_MITSHM=1",
    "--env", "__GLX_VENDOR_LIBRARY_NAME=nvidia",
    "--env", "__NV_PRIME_RENDER_OFFLOAD=1",
    "--env", "__VK_LAYER_NV_optimus=NVIDIA_only"
  ],

  "workspaceMount": "source=${localWorkspaceFolder}/ros2_src,target=/home/ros_user/ros2_ws/src,type=bind,consistency=cached",
  "workspaceFolder": "/home/ros_user/ros2_ws",

  "containerEnv": {
    "ROS_DISTRO": "humble",
    "DISPLAY": "${localEnv:DISPLAY}",
		"WAYLAND_DISPLAY": "${localEnv:WAYLAND_DISPLAY}", 
		"XDG_RUNTIME_DIR": "${localEnv:XDG_RUNTIME_DIR}"
  },


  "postCreateCommand": "bash -lc \"grep -qxF 'source /opt/ros/humble/setup.bash' /home/ros_user/.bashrc || echo 'source /opt/ros/humble/setup.bash' >> /home/ros_user/.bashrc; grep -qxF 'if [ -f ~/ros2_ws/install/setup.bash ]; then source ~/ros2_ws/install/setup.bash; fi' /home/ros_user/.bashrc || echo 'if [ -f ~/ros2_ws/install/setup.bash ]; then source ~/ros2_ws/install/setup.bash; fi' >> /home/ros_user/.bashrc\"",


  "customizations": {
    "vscode": {
      "extensions": [
        "ms-iot.vscode-ros",
        "ms-python.python",
        "twxs.cmake",
        "ms-vscode.cpptools",
        "redhat.vscode-yaml"
      ],
      "settings": {
        "files.eol": "\n",
        "editor.wordWrap": "on"
      }
    }
  }
}
